import random
from typing import Dict

# Словарь эротических описаний для каждого уровня одежды
OUTFIT_DESCRIPTIONS = {
    6: [  # Полностью одет
        "{name} стоит перед тобой в полном облачении, но даже сквозь одежду видно, как соблазнительно изгибается {his_her} тело. {His_her} {outfit_6} плотно облегает формы, намекая на скрытые прелести.",
        "Облачённая в {outfit_6}, {name} выглядит одновременно неприступно и дразняще. Ткань шепчет по {his_her} коже, когда {he_she} двигается, заставляя воображать, что скрывается под этим нарядом.",
        "{name} одета в {outfit_6}, но каждый изгиб {his_her} тела словно приглазывает освободить его от одежды. Ты замечаешь, как {he_she} непроизвольно проводит рукой по бедру, будто уже представляя твои прикосновения."
    ],
    5: [  # Снят 1 элемент
        "{name} уже лишилась {outfit_6}, и теперь {his_her} {outfit_5} обнажает больше соблазнительной кожи. Каждое движение {his_her} тела заставляет ткань скользить, открывая пикантные проблески.",
        "С {outfit_6} {name} теперь выглядит ещё доступнее. {His_her} {outfit_5} едва сдерживает {his_her} пышные формы, и ты видишь, как {he_she} слегка заводит плечи назад, демонстрируя себя.",
        "Без {outfit_6} фигура {name} стала ещё соблазнительнее. {His_her} {outfit_5} подчёркивает каждый изгиб, и ты замечаешь, как {he_she} проводит языком по губам, наблюдая за твоей реакцией."
    ],
    4: [
        "{name} уже наполовину обнажена, и {his_her} {outfit_4} лишь подчёркивает то, что осталось скрытым. Ты видишь, как {his_her} грудь тяжело вздымается в такт дыханию, а пальцы нервно теребят край одежды.",
        "С каждым сброшенным предметом {name} становится всё смелее. {His_her} {outfit_4} приоткрывает достаточно, чтобы разжечь желание, но оставляет место для фантазии. {He_she} медленно поворачивается, демонстрируя себя с нового ракурса.",
        "Оставаясь в {outfit_4}, {name} выглядит одновременно невинно и развратно. Ткань так тонка, что ты почти видишь очертания {his_her} сосков, а когда {he_she} двигается, между бедер мелькает запретный просвет."
    ],
    3: [
        "Теперь {name} осталась лишь в {outfit_3}, и каждый дюйм обнажённой кожи манит к себе. {He_she} проводит руками по животу, затем чуть ниже, заставляя тебя сглотнуть от возбуждения.",
        "В одном лишь {outfit_3} {name} выглядит как грешная фея. {His_her} грудь свободна и слегка колышется при каждом движении, а бедра так и манят прикоснуться.",
        "{name} стыдливо прикрывает грудь рукой, но это лишь подчёркивает {his_her} округлые формы. {His_her} {outfit_3} так откровенно облегает {his_her} самые интимные места, что у тебя перехватывает дыхание."
    ],
    2: [
        "{name} теперь только в {outfit_2}, и {he_she} прекрасно знает, какое впечатление производит. {He_she} медленно поворачивается, демонстрируя голую спину и ягодицы, лишь слегка прикрытые тонкой тканью.",
        "Оставаясь в одних лишь {outfit_2}, {name} выглядит одновременно невинно и развратно. {He_she} кокетливо прикусывает губу, когда твой взгляд скользит по {his_her} обнажённому торсу к самому интересному месту.",
        "{name} стыдливо пытается прикрыться руками, но это лишь подчёркивает {his_her} прелести. {His_her} {outfit_2} настолько откровенны, что оставляют мало для воображения, и ты видишь, как {he_she} сама возбуждается от твоего взгляда."
    ],
    1: [
        "Теперь {name} лишь в {outfit_1} - последнем бастионе между тобой и {his_her} наготой. {He_she} медленно проводит пальцами по краю ткани, будто предлагая снять её, но не сейчас... чуть позже.",
        "В одном лишь {outfit_1} {name} выглядит соблазнительнее, чем многие полностью обнажённые. Ткань так тонка и мала, что скорее подчёркивает, чем скрывает, и ты видишь, как {he_she} дрожит от предвкушения.",
        "{name} осталась в пикантных {outfit_1}, которые скорее разжигают желание, чем скрывают тело. {He_she} поворачивается к тебе спиной, демонстрируя, как ткань врезается в округлые ягодицы, затем оглядывается через плечо с обещающим взглядом."
    ],
    0: [  # Полностью раздета
        "Теперь {name} полностью обнажена перед тобой, и {he_she} прекрасно осознаёт свою власть. {He_she} медленно проводит руками по груди, затем ниже, по животу, заставляя твоё сердце биться чаще.",
        "Совершенно голая, {name} выглядит как воплощение всех твоих фантазий. {He_she} поворачивается, демонстрируя себя со всех сторон, и ты видишь, как {his_her} кожа покрывается мурашками от возбуждения.",
        "Ничего не скрывая, {name} демонстрирует тебе все свои прелести. {His_her} грудь тяжело вздымается, соски набухли от желания, а между бедер уже виднеется влажный блеск. {He_she} прикусывает губу, наблюдая, как ты разглядываешь {his_her} тело."
    ]
}

# Особые описания для конкретных предметов одежды
SPECIAL_DESCRIPTIONS = {
    "трусики": [
        " Тонкая полоска ткани {outfit_1} едва прикрывает самое сокровенное, оставляя воображению приятную работу.",
        " {outfit_1} так врезаются в упругие ягодицы, что хочется провести пальцем по этой соблазнительной границе.",
        " Мокрые от возбуждения {outfit_1} лишь подчёркивают, насколько {name} хочет продолжения."
    ],
    "лифчик": [
        " Набухшие соски явственно проступают сквозь тонкую ткань {outfit_1}, будто умоляя об освобождении.",
        " {outfit_1} едва сдерживает {his_her} пышную грудь, и ты видишь, как она выскальзывает при каждом глубоком вдохе.",
        " Ажурные {outfit_1} скорее демонстрируют, чем скрывают, и ты можешь разглядеть каждый нюанс {his_her} возбуждения."
    ],
    "чулки": [
        " Подвязки {outfit_1} ведут взгляд вверх по бедрам, к самому желанному месту, ещё скрытому от глаз.",
        " Шёлк {outfit_1} скользит по {his_her} ногам, заставляя мечтать о том, как бы он скользил по твоей коже.",
        " Ленты подвязок {outfit_1} обрамляют {his_her} бёдра, как драгоценную оправу обрамляет жемчужину."
    ]
}

def outfit_review_generator(name: str, outfits: Dict[int, str], mob_outfit_left: int) -> str:
    # Определяем местоимения в зависимости от пола
    gender = "female"  # Замените на получение из mob_data
    pronouns = {
        "female": {"his_her": "её", "he_she": "она", "His_her": "Её", "He_she": "Она"},
        "male": {"his_her": "его", "he_she": "он", "His_her": "Его", "He_she": "Он"}
    }[gender]

    # Создаем безопасный словарь outfit_x
    outfit_data = {
        f"outfit_{i}": outfits.get(i, "одежда")
        for i in range(1, 7)  # от outfit_1 до outfit_6
    }

    # Базовое описание
    description = random.choice(OUTFIT_DESCRIPTIONS[mob_outfit_left])

    # Добавляем специальные описания для конкретных предметов
    current_outfit = outfits.get(mob_outfit_left, "")
    for item, texts in SPECIAL_DESCRIPTIONS.items():
        if item in current_outfit.lower():
            description += random.choice(texts)
            break

    # Заменяем все плейсхолдеры
    formatted_text = description.format(
        name=name,
        **outfit_data,
        **pronouns
    )

    # Добавляем финальный чувственный акцент
    final_touches = [
        " Ты чувствуешь, как кровь приливает к определённым местам, глядя на это.",
        " От этого зрелища у тебя перехватывает дыхание, а в штанах становится тесно.",
        " Ты не можешь оторвать взгляд от этого соблазнительного зрелища.",
        " В воздухе витает напряжение, и ты чувствуешь, как нарастает желание.",
        f" Ты замечаешь, как {pronouns['he_she']} слегка дрожит от возбуждения под твоим взглядом.",
        f" Взгляд {pronouns['his_her']} тёмных глаз обещает тебе гораздо больше, чем просто нагота."
    ]

    formatted_text += random.choice(final_touches)

    return formatted_text
