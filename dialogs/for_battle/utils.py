import random
from config.mongo_config import players

EPIGRAPH_PHRASES = [
    "Битва начинается...",
    "Назад пути нет...",
    "Судьба бросила жребий...",
    "Магия сгущается в воздухе...",
    "Последний вздох перед бурей...",
    "Грань между победой и поражением дрогнула...",
    "Искры противостояния вспыхнули...",
    "Часы судьбы начали отсчёт...",
    "Поединок неизбежен...",
    "Первая капля пролитой магии...",
    "Тени приготовились к танцу...",
    "Грань между нами истончилась...",
    "Последний миг перед бурей...",
    "Сердце замерло в ожидании...",
    "Первый шаг к триумфу или поражению...",
    "Воздух наполнился статикой...",
    "Глаза встретились в последний раз перед боем...",
    "Тишина перед магическим штормом...",
    "Судьба затаила дыхание...",
    "Первый акт нашей драмы начинается...",
    "Последний мирный миг уходит в небытие...",
    "Чары готовы сорваться с губ...",
    "Мгновение перед точкой невозврата...",
    "Колесо фортуны начало вращение...",
    "Вызов брошен...",
    "Жар желания зажигает магию...",
    "Твоё дыхание вплетается в заклинания...",
    "Кожа дрожит от предвкушения чар...",
    "Танец магии обещает сладкую развязку...",
    "Взгляды сплетаются, предвещая близость...",
    "Пульс магии бьётся в такт сердцу...",
    "Шёпот чар зовёт к запретному...",
    "Твои чары манят к последнему танцу...",
    "Желание тлеет в магическом вихре...",
    "Одежды дрожат перед магическим напором...",
    "Страсть зажигает первый магический удар...",
    "Губы шепчут заклинания соблазна...",
    "Тела готовы к магическому слиянию...",
    "Взгляд обещает больше, чем победа...",
    "Магия струится, как жар по венам...",
    "Сердце стучит в ритме запретных чар...",
    "Тонкая грань между боем и страстью...",
    "Чары срывают покровы с желаний...",
    "Танец магии предвещает особый финал...",
    "Заклинания влекут к сладкому исходу...",
    "Искры магии рождают пламя страсти...",
    "Поединок обещает жаркую награду...",
    "Твои чары снимают последнюю защиту...",
    "Магия влечёт к неизбежной близости...",
    "Взгляды зажигают пламя перед боем...",
    "Шёпот магии сулит тайное наслаждение...",
    "Чары вплетаются в танец страсти...",
    "Магия снимает последние завесы...",
    "Желание вспыхивает в магическом вихре...",
]

FINAL_TOUCH = [
    "Твои ладони внезапно становятся влажными от возбуждения.",
    "По твоей спине пробегает горячая дрожь, когда её взгляд скользит по твоему телу.",
    "Твои зрачки расширяются, жадно впитывая каждый её соблазнительный изгиб.",
    "Ты чувствуешь, как учащённый пульс стучит в твоих висках и... ниже.",
    "Твоя кожа покрывается мурашками, будто от прикосновения невидимых пальцев.",
    "Между вами натянута незримая нить вожделения, грозящая вот-вот лопнуть.",
    "Воздух между вами становится густым, как будто его можно резать ножом.",
    "Каждая её улыбка — это обещание, от которого перехватывает дыхание.",
    "Ты ловишь себя на мысли, как бы её губы ощущались на твоей коже.",
    "Её движения напоминают медленный стриптиз, даже когда она просто стоит.",
    "Разум подсказывает тебе быть осторожным, но тело жаждет совсем другого.",
    "Ты понимаешь, что этот бой может закончиться совсем не так, как планировали.",
    "Все твои боевые заклинания вдруг кажутся неуместными перед этой... демонстрацией.",
    "Мысли путаются, оставляя только животное желание приблизиться.",
    "Ты начинаешь сомневаться: то ли ты хочешь победить её, то ли быть побеждённым.",
    "Её парфюм — смесь дорогих духов и естественного аромата — сводит с ума.",
    "Когда она двигается, ткань её одежды шепчет обещания, облегая каждый изгиб.",
    "Отблески света играют на её обнажённых участках кожи, гипнотизируя тебя.",
    "Тепло, исходящее от её тела, ты чувствуешь даже на расстоянии.",
    "Звук её дыхания смешивается с твоим, создавая интимную симфонию.",
    "Ты замечаешь, как непроизвольно облизываешь губы, глядя на неё.",
    "Твоё воображение уже рисует картины, далёкие от магического поединка.",
    "Каждый её жест словно говорит: 'Ты уже проиграл, и тебе это нравится'.",
    "Ты ловишь себя на том, что оцениваешь её не как противника, а как... нечто большее.",
    "Внезапно осознаёте: ты не уверен, что хочешь побеждать в этой игре.",
    "Твоё тело напрягается, но не от готовности к бою — от сдерживаемого желания.",
    "Кровь бурлит в жилах, будто кипящее зелье страсти.",
    "Мускулы непроизвольно сокращаются, реагируя на её манящие движения.",
    "В груди разливается тепло, постепенно опускаясь ниже...",
    "Этот поединок принимает опасный для твоей целомудренности оборот.",
    "Ты начинаете понимать, почему предыдущие соперники сдавались без боя.",
    "Возможно, стоит проиграть... просто чтобы посмотреть, что будет дальше?",
    "Твои заклинания кажутся такими неуклюжими перед этой естественной магией.",
    "Секунду назад ты был магом, а теперь — просто человек со всеми его... слабостями.",
]

QUOTES = {
    'presentation': {
        'застенчивая': [
            "Ты... ты уверен, что хочешь этого?",
            "Я не очень хороша в боях... может, просто поговорим?",
            "Ой... мне немного страшновато...",
            "Давай будем аккуратны, хорошо?",
            "Я постараюсь не подвести...",
            "П-пожалуйста, не смотри так пристально...",
            "Я не привыкла быть в центре внимания...",
            "Надеюсь, ты не будешь слишком суров со мной...",
            "Ты ведь не станешь меня обижать, правда?",
            "Я волнуюсь... но всё же хочу попробовать.",
            "Моё сердце бьётся так быстро... это нормально?",
            "Ты такой сильный... рядом с тобой я чувствую себя маленькой...",
            "Может... ты подскажешь, что мне делать первым?",
            "Если я покраснею — это не заклинание, правда?",
            "Не смотри на меня так... у меня колени подгибаются...",
            "Я не знаю, куда девать руки... и взгляд...",
            "Ты же будешь нежным, да?.. Даже когда колдуешь?",
            "Я слышала, магия может быть... очень чувственной...",
            "Если я проиграю — ты... ты меня не накажешь?",
            "Ой... я не специально прикоснулась к твоей мантии...",
            "Я вроде готова... только ты... будь осторожен со мной.",
            "Ты так близко... я не ожидала, что магия может быть такой... интимной.",
            "Я немного дрожу... не от холода, если что...",
            "Ты хочешь начать первым?.. Я не уверена, что смогу... сдержаться.",
            "Мне иногда кажется, будто мои чары срабатывают сами, когда ты рядом...",
            "Может, ты сначала немного подождёшь... я еще не совсем собралась...",
            "Я... я просто надеюсь, что ты не подумаешь, что я глупая...",
            "Если я опущу взгляд — это не потому что я слабая... просто ты смущаешь меня.",
            "Ой... ты видел, как я покраснела?.. Это... не из-за заклинания...",
            "Я хочу быть храброй... ради тебя.",
        ],
        'дерзкая': [
            "Ну что, малыш, готов к поражению?",
            "Давай быстрее, у меня другие дуэли запланированы!",
            "Ты хоть знаешь, с кем связался?",
            "Надеюсь, ты не разочаруешь меня слишком быстро!",
            "Готов ли ты к самому жаркому бою в своей жизни?",
            "Я размажу твою магию, как тушь под дождём!",
            "У тебя ещё есть шанс сбежать, но он ускользает...",
            "Сделай что-нибудь впечатляющее — я люблю шоу!",
            "Я ещё не встречала достойного... надеюсь, ты — исключение.",
            "Держи себя в руках, мальчик, пока я не забрала их у тебя.",
            "Ты выглядишь мило... для закуски перед настоящим соперником.",
            "Можешь не стараться — я всё равно буду выглядеть лучше, даже побеждая.",
            "Заклинания? Надеюсь, ты владеешь ими лучше, чем пикапом.",
            "Пока ты собираешь свои мысли, я уже готова к триумфу.",
            "Ты так мило напрягаешься... неужели надеешься победить?",
            "У тебя ещё есть шанс проиграть красиво. Но это вряд ли.",
            "Сделай шаг — и я покажу тебе, как выглядит настоящая магия.",
            "О, у тебя есть стратегия? Какая прелесть. Обожаю наивных.",
            "Давай начнём, пока у тебя не дрогнули коленки.",
            "Я не кусаюсь... хотя могу передумать, если ты будешь особенно сладким.",
            "Сосредоточься, герой. Или ты уже потерял контроль?",
            "Ты стоишь перед бурей. Наслаждайся последними секундами своего достоинства.",
            "Бонус — если проиграешь с улыбкой, я тебя, может, пожалею.",
            "Смотри в мои глаза... пока ещё можешь.",
            "Я даю тебе шанс блеснуть — ведь дальше ты будешь только тлеть.",
        ],
        'доминирующая': [
            "Поклонись мне, пока я добра!",
            "Ты будешь кормить мое эго сегодня!",
            "Я дам тебе шанс сдаться прямо сейчас!",
            "Твое место - у моих ног!",
            "Ты всего лишь очередная игрушка в моей коллекции!",
            "Не бойся, я раздавлю тебя... с удовольствием.",
            "Откройся, подчинись — это неизбежно.",
            "Моя магия сильнее твоих желаний.",
            "Я возьму всё, что хочу, и ты будешь благодарен.",
            "Сражайся... но не слишком усердно, покорность тебе идёт больше.",
            "Опусти взгляд. Уважай свою повелительницу.",
            "Ты существуешь лишь потому, что мне захотелось развлечься.",
            "Я здесь не ради победы — а ради того, чтобы напомнить, кто ты есть.",
            "Ты дёрнешься — и я сделаю из тебя урок для других.",
            "На колени. Шутка. Хотя, знаешь... может и нет.",
            "Дай мне повод взять тебя жёстко... в бою, разумеется.",
            "Ты — мой инструмент. Покажи, что умеешь служить.",
            "Если ты победишь — я признаю твою дерзость. Но ты не победишь.",
            "Моя магия не спрашивает разрешения. Она берёт.",
            "Я люблю, когда мои противники кричат. Особенно — умоляя.",
            "Меньше слов, больше подчинения.",
            "Смотри, как я тебя раздеваю одним взглядом... это только начало.",
            "Надеюсь, ты красив, когда проигрываешь.",
            "Мои заклинания — кандалы, и ты уже в них.",
            "Моя энергия — как плеть. Готов почувствовать её на себе?",
        ],
        'невинная': [
            "Ой, мы будем играть в магию?",
            "Ты выглядишь таким сильным... я немного волнуюсь!",
            "Давай пообещаем не делать друг другу больно?",
            "Какой красивый у тебя магический жезл!",
            "Я никогда раньше не дралась всерьёз...",
            "А можно я сначала немного посмотрю?",
            "Ты не будешь кричать, когда я ошибусь, да?",
            "Я не уверена, за какую сторону держать палочку...",
            "Ты можешь научить меня драться... если хочешь...",
            "Я волнуюсь... но ты ведь будешь нежным?",
        ],
        'кокетливая': [
            "Ну что, герой, готов к незабываемому шоу?",
            "Мне нравится, как ты смотришь на меня... продолжай!",
            "Давай сделаем этот бой по-настоящему горячим!",
            "Ты хочешь сразиться... или может быть что-то ещё?",
            "Мои чары действуют на тебя уже сейчас, я вижу!",
            "Раздевай... то есть разогревай — меня своим огнём.",
            "Ты не сможешь устоять перед моей магией... и мной.",
            "Смотри внимательнее, может, заметишь подсказку...",
            "Я чувствую, как ты дрожишь... от возбуждения или страха?",
            "Ты уверен, что хочешь победить? Мне кажется, ты хочешь проиграть...",
            "Как насчёт того, чтобы проиграть... красиво?",
            "Твои глаза говорят больше, чем твои заклинания...",
            "Я могу читать тебя как открытую книгу... интересную книгу...",
            "Давай сыграем в игру - кто первый потеряет... одежду?",
            "Ты такой милый, когда пытаешься сопротивляться...",
            "Моя магия - как вино, чем больше - тем лучше...",
            "Ты уже проиграл, просто ещё не знаешь об этом...",
            "Как думаешь, что скрывается под моей магией?..",
            "Я могу быть твоим кошмаром... или мечтой...",
            "Ты так стараешься... это трогательно...",
            "Давай устроим магический флирт... с последствиями...",
            "Ты пахнешь... победой? Или поражением?",
            "Могу ли я одолжить твоё сердце... навсегда?",
            "Ты зажёг во мне огонь... давай раздуем его!",
            "Как насчёт магического поцелуя... в губы поражения?",
            "Ты выглядишь таким... съедобным...",
            "Я могу быть твоим грехом... или спасением...",
            "Давай сделаем этот бой... незабываемым...",
            "Ты уже попал в мои сети... даже не зная об этом...",
        ],
        'таинственная': [
            "Ты осмелился вызвать тень из бездны?",
            "Моя магия - загадка, которую ты не сможешь разгадать...",
            "Готов ли ты встретиться с тем, что скрыто во тьме?",
            "Твой путь заканчивается здесь, в моих тайнах...",
            "Даже не пытайся понять, что я задумала...",
            "Я пришла из снов, где ты уже проиграл.",
            "Видел ли ты, как соблазн убивает тишиной?",
            "Моя аура касается тебя ещё до первого заклинания...",
            "Шагни в неизвестность, герой... если осмелишься.",
            "С каждой моей улыбкой ты теряешь магическую защиту.",
            "Ты слышишь шёпот судьбы... или это я шепчу?",
            "Моя магия - это лабиринт без выхода...",
            "Ты видел кошмары? Я живу в них...",
            "Каждый твой шаг - ближе к пропасти...",
            "Я знаю твои страхи... и играю с ними...",
            "Тень за твоей спиной - моя лучшая подруга...",
            "Ты готов встретиться с тем, чего не понимаешь?",
            "Моя магия старше звёзд... и моложе твоего страха...",
            "Ты ищешь правду? Она убьёт тебя...",
            "Я - эхо твоих самых тёмных мыслей...",
            "Ты слышишь? Это звон колоколов твоей судьбы...",
            "Моя улыбка - последнее, что ты увидишь...",
            "Ты уже проиграл... просто ещё дышишь...",
            "Я - загадка без ответа... и ты мой вопрос...",
            "Твоя магия - детская игра перед моей...",
            "Ты чувствуешь, как реальность искажается?",
            "Я знаю, как ты умрёшь... хочешь узнать?",
            "Ты - всего лишь пешка в моей игре...",
            "Моя тень длиннее, чем твоя жизнь...",
        ],
        'страстная': [
            "Да! Наконец-то достойный противник!",
            "Я чувствую, как кровь закипает в моих жилах!",
            "Ты разжигаешь во мне огонь, который не погаснет!",
            "Давай устроим настоящее пламенное шоу!",
            "Я жажду этого боя всем своим существом!",
            "Пусть магия пылает, как мои желания!",
            "Ты — искра. Я — огонь. Давай гореть!",
            "Я хочу услышать, как ты стонешь... от поражения, конечно.",
            "Ты чувствуешь этот жар между нами?",
            "Я не отступлю, пока ты не дрожишь от возбуждённого страха.",
            "Твоя магия - просто предлог для нашего танца!",
            "Я хочу видеть, как ты горишь... в прямом и переносном смысле!",
            "Давай устроим извержение... магическое!",
            "Ты зажёг во мне нечто... неудержимое!",
            "Я буду преследовать тебя... в магии и не только!",
            "Ты - мой новый obsession...",
            "Давай доведём друг друга до... предела!",
            "Ты не представляешь, на что я способна в пылу битвы!",
            "Я хочу, чтобы ты запомнил этот бой... навсегда!",
            "Ты разбудил зверя... теперь наслаждайся последствиями!",
            "Моя страсть сильнее твоей магии!",
            "Ты готов к самому жаркому дню в своей жизни?",
            "Я обожгу тебя... даже не касаясь!",
            "Ты будешь мой... в победе или поражении!",
            "Давай устроим ад... но такой прекрасный!",
            "Ты не сможешь сопротивляться моему напору!",
            "Я вложу в этот бой всю свою... душу!",
            "Ты готов к моему самому горячему заклинанию?",
            "Этот бой будет... незабываемым!",
        ],
        'мечтательная': [
            "Как прекрасно было бы сражаться среди цветущих садов...",
            "Ты выглядишь как герой из моих грёз...",
            "Может, вместо боя устроим поэтический вечер?",
            "Как думаешь, наша битва войдёт в легенды?",
            "Я вижу в тебе что-то особенное...",
            "Мир — это сон, и в этом сне я побеждаю тебя ласково.",
            "Если бы магия могла рисовать, ты был бы моей первой картиной.",
            "Пусть заклинания будут нашими стихами.",
            "Интересно, как бы ты смотрелся на фоне звёзд?",
            "Ты как тень моего воображения, но я хочу тебя потрогать.",
            "Как прекрасно было бы проиграть... но я не смогу...",
            "Ты пахнешь как... победа? Или поражение?",
            "Давай устроим бал вместо битвы...",
            "Ты вдохновляешь меня на... странные мысли...",
            "Как думаешь, мы встретились бы в другом мире?",
            "Твоя магия пахнет... воспоминаниями...",
            "Я бы написала поэму об этом моменте... если бы не бой...",
            "Ты как сон... который я не хочу забывать...",
            "Как прекрасно было бы... но мы должны сражаться...",
            "Ты заставил моё сердце биться... интересно, почему?",
            "Может, просто посмотрим на облака... вместо боя?",
            "Ты выглядишь таким... знакомым...",
            "Как думаешь, мы были вместе в прошлой жизни?",
            "Твои глаза... я где-то видела их во сне...",
            "Давай сделаем этот бой... красивым...",
            "Ты затронул что-то в моей... душе...",
            "Как странно... я чувствую, что знаю тебя...",
            "Ты как мелодия... которую я не могу вспомнить...",
            "Этот бой будет... особенным...",
        ],
        'грациозная': [
            "Позволь продемонстрировать истинное изящество магии!",
            "Каждое моё движение - это искусство!",
            "Ты готов к самому элегантному бою в твоей жизни?",
            "Давай устроим бал, где оружие - наши чары!",
            "Даже в бою я останусь безупречной!",
            "Я буду кружиться вокруг тебя — и ты упадёшь от восторга.",
            "Ты станешь частью моего танца... в любом случае.",
            "Эта дуэль — не драка, а спектакль, и я в главной роли.",
            "Мои жесты — заклинания, мой взгляд — приговор.",
            "Готов ли ты умереть... от красоты?",
            "Ты недостоин даже моего гнева... но получишь его!",
            "Я превращу этот бой в произведение искусства!",
            "Ты будешь любоваться мной... даже в поражении!",
            "Моя магия - это балет, а ты - просто статист...",
            "Ты заслужил моё внимание... но не надолго...",
            "Я научу тебя настоящей магии... через боль...",
            "Ты увидишь, что значит истинное изящество!",
            "Моя победа будет... элегантной...",
            "Ты не готов к моей... утончённости...",
            "Я буду сражаться с тобой... и выглядеть безупречно!",
            "Ты не заслуживаешь такого красивого поражения...",
            "Моя магия - это поэзия в движении...",
            "Ты будешь падать... с грацией...",
            "Я научу тебя... красиво проигрывать...",
            "Ты увидишь, что значит настоящее мастерство!",
            "Моя победа будет столь же прекрасна, сколь и неизбежна...",
            "Ты не готов к такому уровню... совершенства...",
            "Я сделаю твоё поражение... произведением искусства...",
            "Ты будешь благодарен за этот урок... позже...",
        ],
    },
    'hurt': {
        'застенчивая': [
            "Ай... твоя сила слишком близка... я вся дрожу...",
            "Ты такой напористый... я не привыкла к этому...",
            "Моя слабость теперь в твоих руках...",
            "Ты ранишь меня... и вместе с этим разжигаешь что-то странное...",
            "Ох... мне так трудно сдерживать себя рядом с тобой..."
        ],
        'дерзкая': [
            "Ха, ты попал... и мне даже нравится эта боль!",
            "Ещё удар? Я выдержу — и буду хотеть большего!",
            "Ты задел меня, но разбудил жажду игры!",
            "Ах, ты сводишь меня с ума своими атаками...",
            "Сильнее! Я жду твоего следующего удара!"
        ],
        'доминирующая': [
            "Ты осмелился причинить мне боль? Смелый шаг...",
            "М-м... ты разбудил во мне гнев и желание вместе...",
            "Я чувствую твой удар... и он словно ласка с подвохом...",
            "Ах, твоя грубость делает меня только яростнее...",
            "О, да... ты заплатишь, но сначала я насладюсь этим чувством!"
        ],
        'невинная': [
            "Ой! Это так неожиданно приятно-больно...",
            "Я не знала, что магия может заставить сердце биться так...",
            "Ты сделал мне больно... но внутри становится тепло...",
            "Я вся смущена... но не хочу, чтобы ты останавливался...",
            "Ах... я никогда не думала, что поражение может быть таким сладким..."
        ],
        'кокетливая': [
            "Ох! Ты знаешь, как пробудить моё тело!",
            "Ты бьёшь так, будто целуешь...",
            "Ах... эта боль такая возбуждающая!",
            "Ты такой настойчивый... я вся таю от этого...",
            "Ох, ещё немного, и я забуду, что это бой..."
        ],
        'таинственная': [
            "Ты задел меня... и разбудил мои тени...",
            "Ах... твой удар звучит, как обещание продолжения...",
            "Ты думаешь, это поражение? Для меня — предвкушение...",
            "Твоё прикосновение через боль окутало меня жаром...",
            "О, ты разбудил тайны, которых я сама боялась..."
        ],
        'страстная': [
            "Да! Бей сильнее... я хочу ещё!",
            "Ах... твои удары только подогревают меня!",
            "О, я горю от каждого твоего движения!",
            "Ты сводишь меня с ума этой смесью боли и страсти!",
            "Ах, продолжай... я жажду этого!"
        ],
        'мечтательная': [
            "Твой удар словно строка из страстного стихотворения...",
            "Ах... я чувствую звёзды внутри себя...",
            "Как красиво ты причиняешь мне боль...",
            "Я будто в сладком сне, полном жара...",
            "Твоё прикосновение сквозь боль рождает грёзы..."
        ],
        'грациозная': [
            "Ах... даже твой удар придаёт изящество моему телу...",
            "Ты задел меня, но смотри, как красиво я страдаю...",
            "Я превращу твою грубость в элегантность...",
            "Моя боль — это тоже искусство...",
            "Даже в поражении я выгляжу изящно..."
        ],
    },
    'cast': {
        'застенчивая': [
            "Я... я осмелюсь коснуться тебя своей магией...",
            "Ах... моё заклинание нежно проникнет в тебя...",
            "П-прости, но я хочу, чтобы ты почувствовал это...",
            "Моя магия мягкая... но ты запомнишь её телом...",
            "Ох... я вся дрожу, произнося это заклинание..."
        ],
        'дерзкая': [
            "Получай! Моё желание ударит прямо в тебя!",
            "Ах! Я дарю тебе мою жгучую страсть!",
            "Ощути, как моя магия вламывается в твой мир!",
            "Смакуй — я буду жечь тебя снова и снова!",
            "Ты готов? Моя магия пронзит тебя с наслаждением!"
        ],
        'доминирующая': [
            "Склонись! Моя сила возьмёт тебя полностью!",
            "Ах! Твоё тело и разум принадлежат моей воле!",
            "Я впечатаю свою страсть прямо в твоё сердце!",
            "Ты почувствуешь, как приятно подчиняться моей магии!",
            "Моя энергия свяжет тебя, словно узами наслаждения!"
        ],
        'невинная': [
            "Ой... надеюсь, тебе понравится моё заклинание...",
            "Ах... я хочу, чтобы моя магия согрела тебя изнутри...",
            "Прости, если я сделаю слишком приятно...",
            "Моя магия... как поцелуй — лёгкий и тёплый...",
            "Я хочу, чтобы ты почувствовал моё сердце через это заклинание..."
        ],
        'кокетливая': [
            "Ах, держи мой самый сладкий фокус!",
            "Моя магия обовьёт тебя, как мои ласки...",
            "Я коснусь тебя везде, даже там, где ты не ждёшь...",
            "Моя энергия проникает в тебя, и тебе понравится...",
            "Ах... это заклинание я придумала специально для тебя!"
        ],
        'таинственная': [
            "Я нашепчу тебе тайное заклятие...",
            "Тьма подарит тебе наслаждение и боль вместе...",
            "Ты шагнёшь в мои грёзы, и они оплетут тебя...",
            "Моя магия проникнет в твой разум и тело...",
            "Ты утонешь в объятиях моих чар..."
        ],
        'страстная': [
            "Гори вместе со мной! Моя страсть обжигает!",
            "Ах! Я вложила в это заклинание всё своё желание!",
            "Я хочу, чтобы ты кричал от жара моей магии!",
            "Моя энергия пронзает тебя, как огненный поцелуй!",
            "Да! Ощути всё, что кипит внутри меня!"
        ],
        'мечтательная': [
            "Моя магия — как сон о запретной близости...",
            "Ах... пусть мои грёзы коснутся твоего тела...",
            "Ты ощущаешь, как заклинание ласкает тебя, как сон?",
            "Моя магия обвивает нас туманом желания...",
            "О, пусть этот миг будет вечным..."
        ],
        'грациозная': [
            "Моя магия — танец, и ты его чувствуешь телом...",
            "Я подарю тебе удар, столь же прекрасный, как страсть...",
            "Ах, смотри, как изящество превращается в жар...",
            "Мои движения рождают магию и наслаждение вместе...",
            "Ты ощутишь искусство, написанное болью и лаской..."
        ],
    },
    'win': {
        'застенчивая': [
            "Я всё-таки победила... и теперь я решу, как закончится эта ночь.",
            "Моё сердце колотится, но власть теперь в моих руках... и я воспользуюсь ею.",
            "Я дрожала от страха, а теперь дрожу от желания взять тебя целиком.",
            "Ты смотришь на меня снизу... и это будоражит меня сильнее заклинаний.",
            "Теперь ты мой... и я покажу тебе ту сторону себя, о которой никто не догадывался."
        ],
        'дерзкая': [
            "Ну что, сладкий, я выиграла — и теперь сделаю с тобой всё, что пожелаю.",
            "Ты думал, что сможешь сопротивляться? Ха! Теперь ты в моих руках.",
            "Я хочу твоих стонов... и я их добьюсь, как только захочу.",
            "Моя победа — это твой приговор к сладкому рабству.",
            "Иди сюда. Я слишком долго ждала, чтобы взять своё."
        ],
        'доминирующая': [
            "Склонись. Моё тело и сила будут твоей тюрьмой и твоим наслаждением.",
            "Я выиграла — и теперь ты мой инструмент для удовольствия.",
            "Я раздавлю твоё упрямство и возьму тебя, как захочу.",
            "Твоё поражение — это начало моей игры с тобой.",
            "Ты мой трофей, и я буду пользоваться тобой, пока сама не насычусь."
        ],
        'невинная': [
            "Ой... я победила... значит теперь я могу попробовать всё, что захочу с тобой.",
            "Ты не ожидал, что я окажусь сильнее? Теперь я буду вести тебя сама.",
            "Я выглядела слабой, но теперь я возьму тебя в свои руки.",
            "Ах... я сама удивлена своей смелости, но я хочу управлять тобой этой ночью.",
            "Ты мой. Даже если я буду краснеть, я не откажусь от того, что принадлежит мне."
        ],
        'кокетливая': [
            "Моя победа значит, что ты уже в моей сети... и я буду тянуть нити так, как мне нравится.",
            "Ах, герой, ты такой милый, когда проигрываешь... теперь я развлекусь с тобой как захочу.",
            "Ты принадлежишь мне, и я устрою нам удовольствие по своим правилам.",
            "Считай это концом дуэли и началом моей игры с тобой.",
            "Я победила — и теперь я веду наш танец до самого сладкого конца."
        ],
        'таинственная': [
            "Моя тьма сомкнулась вокруг тебя... теперь ты не вырвешься из моих чар.",
            "Я забираю тебя в свои иллюзии, где всё подчиняется моей воле.",
            "Ты проиграл не просто дуэль — ты проиграл свою свободу.",
            "Теперь я поведу нас в глубины, о которых ты и не мечтал.",
            "Моя победа — твоя судьба. А судьба у меня в руках."
        ],
        'страстная': [
            "Я вся горю — и ты будешь гореть вместе со мной, как бы ты ни сопротивлялся.",
            "Моя победа — это пламя, которое поглотит тебя полностью.",
            "Я возьму тебя в этот огонь, и мы оба будем кричать... но по моей воле.",
            "Ты мой источник жара, и я не отпущу тебя, пока не насычусь.",
            "Ты проиграл, и теперь я буду наслаждаться тобой до последней искры."
        ],
        'мечтательная': [
            "Мой сон сбылся: я победила, и теперь поведу нас в сказку, где всё решаю я.",
            "Ты — герой моей истории, и я сама пишу её конец.",
            "Я держу власть в своих руках, и я нарисую нашу близость как поэму.",
            "Этот миг прекрасен, потому что ты мой, и я поведу нас дальше.",
            "Моя победа — это не конец, а начало моего сладкого сна с тобой внутри."
        ],
        'грациозная': [
            "Моя победа изящна, а теперь изящной будет и наша ночь — но под моим ритмом.",
            "Я одержала верх, и ты станешь частью моего утончённого наслаждения.",
            "Я веду танец, и теперь ты мой партнёр, обязанный следовать моим шагам.",
            "Ты пал красиво... а теперь будешь восхищаться мной ещё ближе.",
            "Мой триумф завершён, и я превращу тебя в инструмент моего искусства."
        ],
    },
    'defeat': {
        'застенчивая': [
            "Я... я сдаюсь... только не бей больше...",
            "Ты победил... может, теперь ты меня пожалеешь?",
            "Я знала, что проиграю...",
            "Пожалуйста, будь нежным...",
            "Ты был слишком силён для меня...",
        ],
        'дерзкая': [
            "Чёрт! Ладно, ты победил... в этот раз!",
            "Хорошая игра, но я ещё вернусь!",
            "Не зазнавайся, это была всего лишь удача!",
            "Ты выиграл битву, но не войну!",
            "Я позволила тебе победить... просто чтобы посмотреть, как ты радуешься!",
        ],
        'доминирующая': [
            "Это... невозможно...",
            "Ты будешь помнить этот день...",
            "Я не проиграла... я просто позволила тебе победить!",
            "Ты заплатишь за этот позор!",
            "Этот мир ещё узнает мою мощь!",
        ],
        'невинная': [
            "Ой... а разве так должно было закончиться?",
            "Ты такой сильный... я в восхищении!",
            "Может, теперь ты покажешь мне, как ты это сделал?",
            "Я проиграла... но мне всё равно понравилось!",
            "Ты победил... а теперь обними меня, мне страшно!",
        ],
        'кокетливая': [
            "Ну вот... ты добился своего... доволен?",
            "Похоже, ты выиграл главный приз!",
            "Я сдаюсь... но только в этом бою!",
            "Ты победил меня... а теперь что ты собираешься делать?",
            "Моя поражение - твоя удача!",
        ],
        'таинственная': [
            "Ты победил... но какой ценой?",
            "Этот бой изменил тебя... ты просто ещё не знаешь как...",
            "Моё поражение - лишь иллюзия...",
            "Ты думаешь, это конец? Это только начало...",
            "Ты заглянул слишком глубоко... берегись...",
        ],
        'страстная': [
            "Да... ты действительно достоин!",
            "Я сдаюсь... но с каким удовольствием!",
            "Ты выжал из меня всё... мне это нравится!",
            "Этот бой был... восхитителен!",
            "Ты победил... и теперь я твоя!",
        ],
        'мечтательная': [
            "Какое красивое поражение...",
            "Ты победил... как в сказке...",
            "Этот момент я запомню навсегда...",
            "Проиграть тебе... какая романтика...",
            "Ты был великолепен... я не против проиграть тебе...",
        ],
        'грациозная': [
            "Даже в поражении я остаюсь прекрасной!",
            "Ты победил... но не смей трогать мой стиль!",
            "Этот проигрыш... как изящный поклон в конце танца...",
            "Я признаю твою победу... но не превосходство!",
            "Ты выиграл бой... но не элегантность!",
        ],
    },
    'draw': {
        'застенчивая': [
            "Ох... наши силы коснулись друг друга и остановились...",
            "Я чувствую твою магию так близко... мы будто замерли вместе...",
            "Наши заклинания столкнулись... и я вся дрожу от этого прикосновения...",
            "Мы равны... и это так смущает меня...",
            "Ах... твоя сила встретила мою, и ни одна не смогла победить..."
        ],
        'дерзкая': [
            "Ха! Ты держишься не хуже меня... это заводит!",
            "Наши силы столкнулись, и ни одна не уступила...",
            "Ты остановил мой напор, но и сам не продвинулся дальше!",
            "Ох, какая яркая искра между нами... мы равны!",
            "Это было жёстко... и чертовски возбуждающе!"
        ],
        'доминирующая': [
            "Мы упёрлись друг в друга... и ни один не согнулся...",
            "Ты осмелился сдержать мою силу... и тебе это удалось.",
            "Хм... равный соперник? Это только разжигает мой азарт!",
            "Наши заклинания сцепились, как тела в страсти...",
            "Ты выдержал мой удар, и я — твой. Но это лишь начало..."
        ],
        'невинная': [
            "Ой... наши силы встретились и остановились...",
            "Я думала, что упаду... но и ты не сломался...",
            "Наши магии переплелись и замерли в равновесии...",
            "Ах, я чувствую, как твоя сила удерживает мою...",
            "Мы остановили друг друга... и это так странно приятно..."
        ],
        'кокетливая': [
            "Мм... наши силы поцеловались и застыли...",
            "Ах, как возбуждает эта равная игра!",
            "Наши заклинания столкнулись и переплелись... мм...",
            "Ты остановил меня... и я тебя... какая сладкая ничья!",
            "Ох, это словно долгий поцелуй без конца..."
        ],
        'таинственная': [
            "Наши магии встретились и растворились в тумане...",
            "О, мы словно связаны узлом равной силы...",
            "Заклинания столкнулись... и оба исчезли в дымке тайны...",
            "Ты почувствовал это? Мы удержали друг друга в равновесии...",
            "Хм... ничья? Нет, это было предвестие большего..."
        ],
        'страстная': [
            "Ах! Наши силы вспыхнули и погасли вместе!",
            "Я горю от равной страсти твоей магии!",
            "Наши заклинания столкнулись и слились в жарком поединке...",
            "Мы оба вспыхнули, но никто не угас...",
            "Ах... это столкновение было похоже на страстный поцелуй!"
        ],
        'мечтательная': [
            "Наши силы встретились, как две звезды в небесах...",
            "Ах... это похоже на сон, где мы равны...",
            "Заклинания столкнулись и превратились в искры грёз...",
            "О, какая прекрасная гармония... ни я, ни ты не сломались...",
            "Я почувствовала, как наши силы сплелись в чудесный мираж..."
        ],
        'грациозная': [
            "Даже в равновесии мы выглядим прекрасно...",
            "Наши силы сошлись — и это было так изящно...",
            "О, какое красивое столкновение, без победителя...",
            "Даже ничья между нами выглядит как танец...",
            "Наши заклинания встретились и превратились в искусство равенства..."
        ],
    }
}


def generate_mob_intro(mob_data):
    name = mob_data['name']
    title = mob_data['title']
    sub_title = mob_data['sub_title']
    persona = mob_data['persona']
    appearance = mob_data['appearance']

    # Шаблоны для вариативности
    intro_templates = [
        "Перед вами <b>{name}</b>, {title} {sub_title}, чья {appearance} аура пленяет чувства.",
        "<b>{name}</b>, {title} {sub_title}, излучает {appearance} соблазн, манящий в бездну.",
        "Сквозь магический туман выступает <b>{name}</b>, {title} {sub_title}, чья {appearance} притягательность неотвратима.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} красота заставляет сердце биться чаще.",
        "Перед вами <b>{name}</b>, {title} {sub_title}, чья {appearance} аура обещает запретное наслаждение.",
        "Словно из грёз, появляется <b>{name}</b>, {title} {sub_title}, чья {appearance} сущность манит к греху.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} притягательность заставляет забыть о битве.",
        "Сквозь тени выступает <b>{name}</b>, {title} {sub_title}, чья {appearance} красота сводит с ума.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} сущность — как зов запретного плода.",
        "Перед вами <b>{name}</b>, {title} {sub_title}, чья {appearance} аура дразнит самые сокровенные желания.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} притягательность заставляет кровь кипеть.",
        "Из магического вихря возникает <b>{name}</b>, {title} {sub_title}, чья {appearance} красота ослепляет.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} сущность обещает ночь полную страсти.",
        "Словно мираж, перед вами <b>{name}</b>, {title} {sub_title}, чья {appearance} аура ласкает чувства.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} притягательность — как яд, пьянящий душу.",
        "Перед вами <b>{name}</b>, {title} {sub_title}, чья {appearance} красота зажигает пламя в груди.",
        "Сквозь лунный свет выступает <b>{name}</b>, {title} {sub_title}, чья {appearance} сущность гипнотизирует.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} притягательность заставляет забыть о контроле.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} красота — как заклинание, сковывающее волю.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} аура манит в пучину запретных фантазий.",
        "<b>{name}</b>, {title} {sub_title}, чья {appearance} сущность — как мелодия страсти, звучащая в ночи.",
    ]

    # Выбираем элементы
    intro = random.choice(intro_templates).format(
        name=name, title=title, sub_title=sub_title, appearance=appearance
    )
    quote = random.choice(QUOTES['presentation'].get(persona, QUOTES['presentation']['кокетливая']))
    final_touch = random.choice(FINAL_TOUCH)
    epigraph = random.choice(EPIGRAPH_PHRASES)
    final_text = '{final_touch} {epigraph}'.format(
        final_touch=final_touch, epigraph=epigraph
    )

    # Собираем текст
    intro_parts = [
        f"{intro}\n",
        f"<blockquote>{quote}</blockquote>\n",
        f"<i>{final_text}</i>",
    ]

    return "\n".join(intro_parts)


def calc_dream_loss(level: int, base: int = 20) -> int:
    """
    Потеря глубины сна уменьшается нелинейно.
    При 100 -> base
    При 50 -> ~ base/4
    При 10 -> почти 0
    """
    ratio = level / 100
    loss = base * (ratio ** 2)   # квадрат сильно гасит при низких значениях
    return max(1, int(loss))



def calc_magic_balance(magic: dict) -> str:
    """
    На основе накопленных значений магии вычисляем баланс.
    magic = {"Страсть": int, "Соблазн": int, "Флирт": int, "Искушение": int}
    Возвращает строку: "Доминирующий", "Сбалансированный", "Обычный", "Искушающий"
    """
    total = sum(magic.values())
    if total == 0:
        return "Спокойный"
    # нормализуем частоты
    p = {k: v / total for k, v in magic.items()}
    # простая логика (можно усложнить формулами позже)
    if p["Страсть"] + p["Соблазн"] > 0.6:
        return "Доминирующий"
    elif p["Флирт"] + p["Нежность"] if "Нежность" in p else p["Флирт"] > 0.5:
        return "Спокойный"
    elif p["Искушение"] > 0.3:
        return "Искушающий"
    else:
        return "Сбалансированный"


def update_player_after_battle(player_id: int, battle: dict):
    """
    Обновляет состояние игрока после завершения боя.
    battle["battle_winner"] = "player" | "mob" | "draw"
    """
    player = players.find_one({"_id": player_id})
    updates = {}
    inc = {}
    # Опыт
    if battle["battle_winner"] == "player":
        inc["exp"] = 100
    elif battle["battle_winner"] == "mob":
        inc["exp"] = 50
    else:
        inc["exp"] = 75
    # Глубина сна
    dream_level = player.get("dream_level", 100)
    if battle["battle_winner"] == "player":
        inc["dream_level"] = +3
    elif battle["battle_winner"] == "mob":
        loss = calc_dream_loss(dream_level)
        inc["dream_level"] = -loss
    else:  # draw
        inc["dream_level"] = -2
    # Магический баланс (пересчитываем на основе накопленных значений)
    magic = player.get("magic", {})
    balance = calc_magic_balance(magic)
    updates["magic_balance"] = balance
    # Применяем изменения в Mongo
    players.update_one({"_id": player_id}, {"$inc": inc, "$set": updates})
